



Automated Certificate Management Environment                 G. D. Marco
Internet-Draft                                               independent
Intended status: Standards Track                            16 July 2023
Expires: 17 January 2024


Automatic Certificate Management Environment (ACME) with OpenID Connect
                             Federation 1.0
              draft-demarco-acme-openid-federation-latest

Abstract

   This document defines how the X.509 certificates can be issued by a
   trust anchor and its intermediates through the ACME protocol to all
   the organizations that are part of a federation built on top of
   OpenID Connect Federation 1.0.

About This Document

   This note is to be removed before publishing as an RFC.

   Status information for this document may be found at
   https://datatracker.ietf.org/doc/draft-demarco-acme-openid-
   federation/.

   Discussion of this document takes place on the Automated Certificate
   Management Environment Working Group mailing list
   (mailto:acme@ietf.org), which is archived at
   https://mailarchive.ietf.org/arch/browse/acme/.  Subscribe at
   https://www.ietf.org/mailman/listinfo/acme/.

   Source for this draft and an issue tracker can be found at
   https://github.com/peppelinux/draft-demarco-acme-openid-federation.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 17 January 2024.

Copyright Notice

   Copyright (c) 2023 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Revised BSD License text as
   described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Revised BSD License.

Table of Contents

   1.  Introduction
   2.  Audience Target audience/Usage
   3.  Terminology
   4.  Conventions and Definitions
   5.  Protocol Flow
     5.1.  Preconditions
     5.2.  Overview
   6.  Security Considerations
   7.  IANA Considerations
   8.  Normative References
   Acknowledgments
   Author's Address

1.  Introduction

   The Automatic Certificate Management Environment (ACME) is the
   standard [RFC8555] that allows obtaining certificates for websites
   (HTTPS [RFC2818]) by verifing the "fully-qualified" domain names
   [RFC3696] and the web servers within these.

   OpenID Connect Federation 1.0 [OIDC-FED] is the standard that allows
   building multilateral federations through a trust evaluation
   mechanism attesting the possession of public keys, signature
   capabilities, protocol specific metadata and several administrative
   and tecnical information in the form of trust marks, related to a
   specific entity belonging to an organization.

   OpenID Connect Federation 1.0 allows an ACME server to issue X.509
   certificates to one or more than a single organization without having
   pre-established any direct relationship or any stipulation of a
   contract to the requestor.  In a multilateral federation, composed by
   thousands of entities belonging to different organizations, all the
   participants adhere to the same regulation or trust framework.
   OpenID Connect Federation 1.0 allows each participant to recognize
   the other participant using a trust evaluation mechanism, using
   RESTful services and cryptographic materials.

   Considering that a requestor is an entity requesting the issuance of
   a X.509 certificate to a server and the issuer is the ACME server
   that validates the entitlements of the requestor before issuing the
   X.509 certificate, this specification defines how ACME and OpenID
   Connect Federation 1.0 can be integrated allowing an efficient
   issuance of X.509 to a requestor, reducing both the bureaucratic and
   the implementative costs, since:

   *  It does not require the involvement of other resources than the
      ACME newOrder endpoint, since the authentication and authorization
      of the requestor is asserted with OpenID Federation 1.0.

   *  Instead of the /.well-known/acme-challenge/{token} endpoint it
      defines how to use and validate a basic OpenID Connect Federation
      component, called Entity Configuration, that is a signed JWT
      published in a well-known resource (/.well-known/openid-
      federation) published by the requestor.

   *  It removes the requirement for the authentication of an entity and
      the provisioning of the _acme-challenge token_, since the
      authorization mechanisms is built on top of the trust evaluation
      model as defined in OpenID Connect Federation 1.0.

   *  It extends the ACME newOrder endpoint, defining a new payload
      identifier type called openid-federation.

   *  It defines how the OpenID Federation Entity Statements can be used
      for the publication of the X.509 certificates, by a trust anchor
      or intermediate, that was previously issued with ACME.

2.  Audience Target audience/Usage

   The audience of the document are the multilateral federations that
   require automatic issuance oif X.509 certificates using an
   infrastructure of trust based on OpenID Connect Federation 1.0.

3.  Terminology

   ACME Automated Certificate Management Environment, a certificate
   management protocol [RFC8555.

   TA OpenID Connect Federation Trust Anchor, see CA

   CA Certification Authority, also known as Trust Anchor or
   Intermediate, specifically one that implements the ACME protocol
   though an ACME server.

   CSR Certificate Signing Request, specifically a PKCS#10 [RFC2986] as
   supported by ACME.

   FQDN Fully Qualified Domain Name.

   Requestor ...

   Issuer ...

   The terms "Trust Anchor", "Intermediate", "Entity Configuration",
   "Entity Statement", "Trust Mark" and "Trust Chain" used in this
   document are defined in [OIDC-FED].

4.  Conventions and Definitions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   BCP 14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

5.  Protocol Flow

   This section presents the protocol flow.

5.1.  Preconditions

   The protocol assumes the following preconditions are met:

   1.  The Requestor and the Issuer MUST publish their Entity
       Configuration as defined in ... OIDC FED ref here.

   2.  The Requestor and the Issuer MUST be able to establish the trust
       to each other obtaining the Trust Chain of each other, as defined
       in ... OIDC FED ref here.

   3.  The Trust Anchor and its Intermediate SHOULD implement an ACME
       server with at least the newOrder endpoint as extended in this
       specification.

   4.  The Issuer MUST publish in its Entity Configuration, within the
       metadata parameter (JSON Object), the metadata type acme_issuer
       according to the Section ... of this specification, *TBD*.

   5.  In a federation an Issuer MAY be a Leaf if a specific Trust Mark
       is issued for it and published withing its Entity Configuration.

   Where the precondition number 4 and number 5 are not met, there are
   cases where the Requestor known a priori which are the Issuers in one
   or more federations, in this case the requestor directly request the
   issuance of the X.509 certificate to the issuer it trusts, without
   any discovery phase.

5.2.  Overview

   TBD: high level design and ascii sequence diagram.

6.  Security Considerations

   TODO Security

7.  IANA Considerations

   This document has no IANA actions.

8.  Normative References

   [OIDC-FED] Hedberg, R., Jones, M. B., Solberg, A. Ã…., Bradley, J., De
              Marco, G., and V. Dzhuvinov, "OpenID Connect Federation
              1.0", n.d..

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/rfc/rfc2119>.

   [RFC2818]  Rescorla, E., "HTTP Over TLS", RFC 2818,
              DOI 10.17487/RFC2818, May 2000,
              <https://www.rfc-editor.org/rfc/rfc2818>.

   [RFC2986]  Nystrom, M. and B. Kaliski, "PKCS #10: Certification
              Request Syntax Specification Version 1.7", RFC 2986,
              DOI 10.17487/RFC2986, November 2000,
              <https://www.rfc-editor.org/rfc/rfc2986>.

   [RFC3696]  Klensin, J., "Application Techniques for Checking and
              Transformation of Names", RFC 3696, DOI 10.17487/RFC3696,
              February 2004, <https://www.rfc-editor.org/rfc/rfc3696>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/rfc/rfc8174>.

   [RFC8555]  Barnes, R., Hoffman-Andrews, J., McCarney, D., and J.
              Kasten, "Automatic Certificate Management Environment
              (ACME)", RFC 8555, DOI 10.17487/RFC8555, March 2019,
              <https://www.rfc-editor.org/rfc/rfc8555>.

Acknowledgments

   TODO acknowledge.

Author's Address

   Giuseppe De Marco
   independent
   Email: demarcog83@gmail.com
